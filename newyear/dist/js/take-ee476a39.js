import{_ as a,d as s,g as l,i as e,j as t,r as o,c as n,a as c,e as i,t as u,l as r,m as p,b as d,w as m,$ as v,o as g,p as f,f as b}from"../default/default-5704fa67.js";import{$ as h}from"./upload-9b261bfb.js";const k=a=>(f("data-v-0017f9de"),a=a(),b(),a),y={class:"common-pages que-one"},w=k((()=>c("div",{class:"common-logo"},null,-1))),_=k((()=>c("h3",{class:"page-title"},[c("img",{class:"img",src:"./assets/img-08-23c24dda.png",alt:""})],-1))),C={class:"img-box"},x=["src"],j={class:"reply-box"},D={class:"pic common-btn"},F={class:"pic common-btn"},z={class:"cloud"},L={class:"layer layer-eggs"},R=k((()=>c("p",{class:"info"},"恭喜您是第41（82、123、164）位提交的员工，与走过41年的泛捷有着不解之缘，特此送上隐藏奖励",-1))),$=k((()=>c("div",{class:"close-btn iconfont icon-close22"},null,-1))),q={class:"layer layer-submit"},A=k((()=>c("p",null,"确认上传吗？",-1))),I=k((()=>c("p",null,"照片只有一次上传机会，",-1))),U=k((()=>c("p",null,"若审核不通过将取消",-1))),B=k((()=>c("p",null,"兑奖资格哦～",-1)));var E=a(s({__name:"take",setup(a){const s=l(),{isLoginFn:f}=e();f();let b=t(!1),k=t(!0),E=new FormData,G=t("");const H=a=>{const s=a.target.files[0],l=new FileReader;l.onload=function(a){G.value=a.target.result},l.readAsDataURL(s),E.set("file",s),k.value=!1};let J=t(!1);const K=()=>{E.get("file")&&(J.value=!0)},M=()=>{J.value=!1},N=async()=>{let a=await h("/api.php/puzzle/group-photo",E);0==a.code?a.data.rank&&""!=a.data.rank?(b.value=!0,J.value=!1):s.push({path:"/photo/end"}):v({type:"error",msg:a.message})};return(a,s)=>{const l=o("router-link");return g(),n("div",y,[w,_,c("div",C,[c("img",{src:G.value,class:"img",alt:""},null,8,x)]),c("div",j,[c("div",{class:"common-btn",onClick:K,btn:""},"立即上传"),c("label",D,[c("input",{type:"file",onChange:H,accept:"image/*;"},null,32),i("从照片库中选择 ")]),c("label",F,[c("input",{type:"file",onChange:H,accept:"image/*",capture:"camera"},null,32),i(u(k.value?"立即拍摄":"重新拍摄"),1)])]),r(c("div",z,null,512),[[p,b.value||J.value]]),r(c("div",L,[R,d(l,{to:"/photo/eggs",class:"common-btn"},{default:m((()=>[i("查看奖励")])),_:1}),$],512),[[p,b.value]]),r(c("div",q,[A,I,U,B,c("div",{class:"btn-box"},[c("div",{class:"close-btn",onClick:M},"返回重拍"),c("div",{class:"up-btn",onClick:N},"确认上传")])],512),[[p,J.value]])])}}}),[["__scopeId","data-v-0017f9de"],["__file","D:/work/html/work/work/src/views/photo/take.vue"]]);export{E as default};
