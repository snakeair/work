import{_ as a,d as e,i as s,j as l,r as t,c as n,a as o,e as c,b as i,w as u,l as r,m as p,C as d,$ as m,o as f,p as v,f as b}from"../default/default-5704fa67.js";import{$ as g}from"./upload-9b261bfb.js";const _=a=>(v("data-v-59882952"),a=a(),b(),a),w={class:"common-pages que-one"},k=_((()=>o("h3",{class:"page-title"},"第一题",-1))),y=["innerHTML"],h={class:"img-box"},z=["src"],j={class:"reply-box"},q={class:"pic common-btn"},C={class:"pic common-btn"},L={class:"cloud"},x={class:"layer layer-up"},D=_((()=>o("div",{class:"iconfont icon-dui3"},null,-1))),F=_((()=>o("p",{class:"info"},"上传成功",-1)));var I=a(e({__name:"one",setup(a){const{isLoginFn:e}=s();e();let v=l(""),b=l(""),_=0,I=null;(async()=>{let a=await d("/api.php/puzzle/subject",{});b.value=a.data.title,I=setInterval((function(){_++}),1e3)})();let $=new FormData;const H=async()=>{if(!$.get("file"))return!1;clearInterval(I),I=null,$.set("use_seconds",`${_}`),$.set("puzzle_id","1");let a=await g("/api.php/puzzle/first",$);0==a.code?v.value="up":m({type:"error",msg:a.message})};let M=l("");const R=a=>{const e=a.target.files[0],s=new FileReader;s.onload=function(a){M.value=a.target.result},s.readAsDataURL(e),$.set("file",e)};return(a,e)=>{const s=t("router-link");return f(),n("div",w,[k,o("p",{class:"page-take",innerHTML:b.value},null,8,y),o("div",h,[o("img",{src:M.value,class:"img",alt:""},null,8,z)]),o("div",j,[o("label",q,[o("input",{type:"file",onChange:R,accept:"image/*",capture:"camera"},null,32),c("立即拍照 ")]),o("label",C,[o("input",{type:"file",onChange:R,accept:"image/*;"},null,32),c("从照片库中选择 ")]),o("div",{class:"up-btn common-btn",onClick:H,btn:""},"立即提交")]),i(s,{class:"to-rank",to:"/question/rank"},{default:u((()=>[c("查看答题排行榜")])),_:1}),r(o("div",L,null,512),[[p,""!==v.value]]),r(o("div",x,[D,F,i(s,{to:"/question/two",class:"close-btn common-btn",btn:""},{default:u((()=>[c("下一题")])),_:1})],512),[[p,"up"==v.value]])])}}}),[["__scopeId","data-v-59882952"],["__file","D:/work/html/work/work/src/views/question/one.vue"]]);export{I as default};
